task.spawn(function()
	while true do
		print("\n[LOOP] Iniciando scan no server...")

		local found = scanPlots()

		if found then
			print("[LOOP] Secret encontrado! Scanner continuará ativo.")
			task.wait(30)

		else
			if not hasTeleported then
				hasTeleported = true
				print("[LOOP] Nenhum secret detectado. Teleportando UMA ÚNICA vez em 5s...")

				for i = 5, 1, -1 do
					print("[LOOP] Teleport em", i)
					task.wait(1)
				end

				teleportRandom()
				return -- encerra o loop desse server
			else
				print("[LOOP] Nenhum secret e teleport já usado. Mantendo scan.")
				task.wait(30)
			end
		end
	end
end)
