task.spawn(function()
	local secretFoundEver = false

	while true do
		print("\n[LOOP] Iniciando scan no server...")

		local found = scanPlots()

		if found then
			secretFoundEver = true
			print("[LOOP] Secret encontrado! Scanner continuará ativo.")
			task.wait(30)

		else
			if not hasTeleported then
				hasTeleported = true
				print("[LOOP] Nenhum secret detectado. Teleportando UMA ÚNICA vez em 5s...")

				for i = 5, 1, -1 do
					print("[LOOP] Teleport em", i)
					task.wait(1)
				end

				teleportRandom()
				return -- ⬅️ ENCERRA O LOOP ATUAL
			else
				print("[LOOP] Nenhum secret, mas teleport já foi feito. Não teleportando novamente.")
				task.wait(30)
			end
		end
	end
end)
